<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type='text/javascript'>
	google.load('visualization', '1', {packages:['gauge']});
    google.setOnLoadCallback(drawChart);
    function drawChart() {
    	var data = new google.visualization.DataTable();
        data.addColumn('string', 'Label');
        data.addColumn('number', 'Value');
        data.addRows([
          	['Status', 10],
         	['Pro-activity', 55],
          	['task', 55]
        ]);

        var options = {
        	width: 250, height: 165,
          	redFrom: 50, redTo: 100,
          	yellowFrom:25, yellowTo: 50,
          	minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
        chart.draw(data, options);
	}
</script>

<script type="text/javascript" src="/assets/javascript/heartrate.js"></script>
<script type="text/javascript">
	document.addEventListener("DOMContentLoaded", init, false);
	
	/* The init function creates a 2d context, runs setup and starts draw loop */
	function init() {
    	var ctx = document.getElementById("monitor").getContext("2d");
        window.heartRate = new HeartRate({ context: ctx });
        window.setInterval(draw, 100);
    }

    // Draws the heartrate monitor.
    function draw() {     
    	// heartRate.monitor(xPosition, yPosition);
        heartRate.monitor();
    }
</script>
    
<h1>Status</h1>
<section class="row info">
    <section class="span3 well first">
        <h4>Heart rate</h4>
        <canvas id="monitor" width="220" height="50" style="margin-top: 40px;"></canvas>
    </section>
    <section class="span4 well">
        <h4>Activities</h4>
        <div id='chart_div' style="margin-top: 25px;"></div>
    </section>
    <section class="span3 well">
        <h4>Ranking</h4>
        <%= image_tag 'images/ninja.png', :width => 125 %>
    </section>
</section>

<section class="row">
	<section class="span7">
    	<a data-toggle="modal" class="btn btn-info addNewEvent" href="#"><i class="icon-plus"></i>Add new event</a>
    </section>
    <section class="span5">
	    <div style="display: inline-block; height: 15px; width: 25px; margin-left: 15px; background-color: #1B50E0;"></div>
    	Others
	    <div style="display: inline-block; height: 15px; width: 25px; margin-left: 15px; background-color: #1BE01E;"></div>
    	Quotes
	    <div style="display: inline-block; height: 15px; width: 25px; margin-left: 15px; background-color: #E0AF1B;"></div>
    	Visits
	    <div style="display: inline-block; height: 15px; width: 25px; margin-left: 15px; background-color: #E01B1B;"></div>
    	Cold calls
    </section>
</section>

<section class="row">
    <section class="span9 first">
        <%= render 'shared/calendar' %>
    </section>
    <section class="span3">
        <span>Your upcoming events.</span>
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Title</th>
                </tr>
            </thead>
            <tbody>
                <% current_user.events.each do |event| %>
                    <tr>
                        <td><%= event.title %></td>
                    </tr>
                <% end %>
            </tbody>
        </table>
    </section>
</section>
<script>
  $(".addNewEvent").click(function() {
    $.ajax({
  		dataType: 'script',
  		type: 'get',
  		url: "events/new"
  	});
  });
</script>